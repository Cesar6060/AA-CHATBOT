@page "/profile"
@using AAU.Components.Modals
@inject NavigationManager NavigationManager
@inject HttpClient Http
@inject IJSRuntime JS
@rendermode InteractiveServer

<h4>@userName's Profile</h4>
<button type="button" class="btn btn-primary" @onclick="OpenModal">Add Pet</button>
@if (pets != null)
{
    <PetAddModal @ref="petModal"/>
    <div class="table-responsive">
        <table class="table table-striped">
            <thead>
            <tr>
                <th>Icon</th>
                <th>My Pet Name</th>
                <th>Age</th>
                <th>Breed</th>
                <th>Sex</th>
                <th>Species</th>
                <th>Actions</th>
            </tr>
            </thead>
            <tbody>
            @foreach (var pet in pets)
            {
                <tr>
                    <td>
                        @if (pet.species == "Dog")
                        {
                            <img src="../Assets/StockPhotoDog.png" width="75" height="75" alt="Pet"/>
                        }
                        else
                        {
                            <img src="../Assets/StockPhotoCat.png" width="75" height="75" alt="Pet"/>
                        }
                    </td>
                    <td>
                        <InputText class="form-control" @bind-Value="pet.name"/>
                    </td>
                    <td>
                        <InputNumber class="form-control" @bind-Value="pet.age"/>
                    </td>
                    <td>
                        @if (pet.species == "Dog")
                        {
                            <select class="form-control" id="petBreed" @bind="pet.breed">
                                @foreach (var breed in DogBreeds)
                                {
                                    <option value="@breed">@breed</option>
                                }
                            </select>
                        }else if (pet.species == "Cat")
                        {
                            <select class="form-control" id="petBreed" @bind="pet.breed">
                                @foreach (var breed in CatBreeds)
                                {
                                    <option value="@breed">@breed</option>
                                }
                            </select>
                        }
                        else
                        {
                            <InputText class="form-control" @bind-Value="pet.breed"/>
                        }
                    </td>
                    <td>
                        <InputText class="form-control" @bind-Value="pet.sex"/>
                    </td>
                    <td>
                        <InputText class="form-control" @bind-Value="pet.species"/>
                    </td>
                    <td>
                        <button class="btn btn-success btn-sm" @onclick="() => UpdatePet(pet)">Update</button>
                        <button class="btn btn-danger btn-sm" @onclick="() => DeletePet(pet)">Delete</button>
                    </td>
                </tr>
            }
            </tbody>
        </table>
    </div>
}
else
{
    <label>Please Add A Pet!</label>
}

@code {
    private List<Pet> pets = new List<Pet>();
    private Pet newPet = new Pet();
    string userId;
    string userName;
    private PetAddModal petModal;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            userId = await JS.InvokeAsync<string>("blazorExtensions.GetLocalStorage", "userId");
            await LoadPets();
            await LoadUsername();
            StateHasChanged();
        }
    }
    private async Task LoadPets()
    {
        pets = await Http.GetFromJsonAsync<List<Pet>>($"/pet/{userId}");
        StateHasChanged();
    }
    
    
    private async Task LoadUsername()
    {
         userName = await Http.GetStringAsync($"/user/name/{userId}");
        StateHasChanged();
    }

    private async Task UpdatePet(Pet pet)
    {
        var response = await Http.PatchAsJsonAsync($"/pet/{pet.id}", pet);
        if (response.IsSuccessStatusCode)
        {
            await LoadPets();
        }
    }
    private void OpenModal()
    {
        petModal.Show();
    }
    

    private async Task DeletePet(Pet pet)
    {
        var response = await Http.DeleteAsync($"/pet/delete/{pet.id}");
        if (response.IsSuccessStatusCode)
        {
            await LoadPets();
        }
    }
    private List<string> CatBreeds = new List<string>
    {
        "Abyssinian",
        "American Bobtail",
        "American Shorthair",
        "Bengal",
        "Burmese",
        "Colorpoint Shorthair",
        "Egyptian Mau",
        "Highlander",
        "Kanaani",
        "Korat",
        "Maine Coon",
        "Munchkin",
        "Ocicat",
        "Persian",
        "Ragdoll",
        "Scottish Fold",
        "Sphynx",
        "Toybob",
        "Turkish Van",
        "York Chocolate",
        "Other"
    };
    
    private List<string> DogBreeds = new List<string>
    {
       "Affenpinscher",
    "Afghan Hound",
    "Airedale Terrier",
    "Akbash",
    "Akita",
    "Alaskan Malamute",
    "American Bulldog",
    "American Eskimo Dog",
    "American Hairless Terrier",
    "American Staffordshire Terrier",
    "Anatolian Shepherd",
    "Australian Cattle Dog/Blue or Red Heeler",
    "Australian Kelpie",
    "Australian Shepherd",
    "Australian Terrier",
    "Basenji",
    "Basset Hound",
    "Beagle",
    "Beagle - Lemon",
    "Bearded Collie",
    "Beauceron",
    "Belgian Shepherd Dog Sheepdog",
    "Belgian Shepherd Laekenois",
    "Belgian Shepherd Malinois",
    "Belgian Shepherd Tervuren",
    "Bernese Mountain Dog",
    "Bichon Frise",
    "Black and Tan Coonhound",
    "Black Labrador Retriever",
    "Black Mouth Cur",
    "Bloodhound",
    "Bluetick Coonhound",
    "Border Collie",
    "Border Terrier",
    "Borzoi",
    "Boston Terrier",
    "Bouvier des Flanders",
    "Boxer",
    "Boykin Spaniel",
    "Briard",
    "Brittany Spaniel",
    "Brussels Griffon",
    "Bull Terrier",
    "Bullmastiff",
    "Cairn Terrier",
    "Canaan Dog",
    "Cane Corso Mastiff",
    "Carolina Dog",
    "Catahoula Leopard Dog",
    "Cattle Dog",
    "Cavalier King Charles Spaniel",
    "Chesapeake Bay Retriever",
    "Chihuahua - Long Hair",
    "Chihuahua - Short Hair",
    "Chinese Crested Dog",
    "Chinese Foo Dog",
    "Chiweenie",
    "Chocolate Labrador Retriever",
    "Chow Chow",
    "Chug (Chi-Pug)",
    "Clumber Spaniel",
    "Cockapoo",
    "Cocker Spaniel",
    "Collie",
    "Coonhound",
    "Corgi",
    "Coton de Tulear",
    "Dachshund - Long Hair",
    "Dachshund - Short Hair",
    "Dalmatian",
    "Dandi Dinmont Terrier",
    "Doberman Pinscher",
    "Dogo Argentino",
    "Dogue de Bordeaux",
    "Dutch Shepherd",
    "English Bulldog",
    "English Cocker Spaniel",
    "English Creme Golden Retriever",
    "English Pointer",
    "English Setter",
    "English Shepherd",
    "English Springer Spaniel",
    "English Toy Spaniel",
    "Eskimo Dog",
    "Estrela Mountain Dog",
    "Feist",
    "Field Spaniel",
    "Fila Brasileiro",
    "Finnish Lapphund",
    "Finnish Spitz",
    "Flat-coated Retriever",
    "Fox Terrier",
    "Foxhound",
    "French Blue Gascon Hound",
    "French Bulldog",
    "German Pinscher",
    "German Shepherd Dog",
    "German Shorthaired Pointer",
    "German Wirehaired Pointer",
    "Glen of Imaal Terrier",
    "Golden Retriever",
    "Goldendoodle",
    "Gordon Setter",
    "Great Dane",
    "Great Pyrenees",
    "Greater Swiss Mountain Dog",
    "Greyhound",
    "Havanese",
    "Hound",
    "Hovawart",
    "Husky",
    "Huskypoo",
    "Ibizan Hound",
    "Illyrian Sheepdog",
    "Irish Setter",
    "Irish Terrier",
    "Irish Wolfhound",
    "Italian Greyhound",
    "Italian Spinone",
    "Jack Russell Terrier",
    "Jack Russell Terrier (Parson Russell Terrier)",
    "Japanese Chin",
    "Jindo",
    "Kai Dog",
    "Karelian Bear Dog",
    "Keeshond",
    "Kerry Blue Terrier",
    "Kishu",
    "Komondor",
    "Kuvasz",
    "Kyi Leo",
    "Labradoodle",
    "Labrador Retriever",
    "Lancashire Heeler",
    "Leonberger",
    "Lhasa Apso",
    "Maltese",
    "Maltipoo",
    "Manchester Terrier",
    "Maremma Sheepdog",
    "Mastiff",
    "McNab",
    "Miniature Pinscher",
    "Mix",
    "Morkie",
    "Mountain Cur",
    "Mountain Dog",
    "Neapolitan Mastiff",
    "New Guinea Singing Dog",
    "Newfoundland Dog",
    "Norfolk Terrier",
    "Norwegian Elkhound",
    "Norwich Terrier",
    "Nova Scotia Duck-Tolling Retriever",
    "Old English Sheepdog",
    "Otterhound",
    "Papillon",
    "Patterdale Terrier (Fell Terrier)",
    "Pekingese",
    "Petit Basset Griffon Vendeen",
    "Pharaoh Hound",
    "Pit Bull Terrier",
    "Plott Hound",
    "Podengo Portugueso",
    "Pointer",
    "Polish Lowland Sheepdog",
    "Pomeranian",
    "Poodle",
    "Portuguese Water Dog",
    "Presa Canario",
    "Pug",
    "Puggle",
    "Puli",
    "Pumi",
    "Rat Terrier",
    "Redbone Coonhound",
    "Retriever",
    "Rhodesian Ridgeback",
    "Rottweiler",
    "Saint Bernard St. Bernard",
    "Saluki",
    "Samoyed",
    "Schipperke",
    "Schnauzer",
    "Schnauzer - Giant",
    "Scottish Deerhound",
    "Scottish Terrier Scottie",
    "Sealyham Terrier",
    "Setter",
    "Shar Pei",
    "Sheep Dog",
    "Shepherd",
    "Shetland Sheepdog Sheltie",
    "Shiba Inu",
    "Shih Tzu",
    "Siberian Husky",
    "Silky Terrier",
    "Skye Terrier",
    "Sloughi",
    "Smooth Fox Terrier",
    "Spaniel",
    "Spitz",
    "Staffordshire Bull Terrier",
    "Standard Poodle",
    "Swedish Vallhund",
    "Terrier",
    "Thai Ridgeback",
    "Tibetan Mastiff",
    "Tibetan Spaniel",
    "Tibetan Terrier",
    "Tosa Inu",
    "Toy Fox Terrier",
    "Treeing Walker Coonhound",
    "Vizsla",
    "Weimaraner",
    "Welsh Corgi",
    "Welsh Springer Spaniel",
    "Welsh Terrier",
    "West Highland White Terrier Westie",
    "Wheaten Terrier",
    "Whippet",
    "White German Shepherd",
    "Wire Haired Dachshund",
    "Wire-haired Pointing Griffon",
    "Wirehaired Terrier",
    "Yellow Labrador Retriever",
    "Yorkiepoo",
    "Yorkshire Terrier Yorkie",
    "Other"
    };
}
